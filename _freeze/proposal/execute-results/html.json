{
  "hash": "19f45487ceb675c823c612e52553c871",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Trait-Based Prediction of Animal Taxa\"\nsubtitle: \"Proposal\"\nauthor: \n  - name: \"Matthew Qi Lan Thompson\"\n    affiliations:\n      - name: \"College of Information Science, University of Arizona\"\ndescription: \"This project will involve creating two predictive models for classifying animal taxa using binary presence and evolutionary rate features of sexual traits.\"\nformat:\n  html:\n    code-tools: true\n    code-overflow: wrap\n    code-line-numbers: true\n    embed-resources: true\neditor: visual\ncode-annotations: hover\nexecute:\n  warning: false\njupyter: python3\n---\n\n::: {#load-pkgs .cell message='false' execution_count=1}\n``` {.python .cell-code}\nimport numpy as np\nimport pandas as pd\nimport os\n\n#machine learning models\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.linear_model import LogisticRegression\n\n#model evaluation and validation\nfrom sklearn.model_selection import train_test_split, cross_val_score\nfrom sklearn.metrics import (\n    accuracy_score, classification_report, confusion_matrix, roc_auc_score\n)\n\n#SHAP for model explainability\nimport shap\n\n#visualization\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nimport statsmodels.api as sm\n```\n:::\n\n\n## Dataset\n\n::: {#load-dataset .cell message='false' execution_count=2}\n``` {.python .cell-code}\nfolder_path = \"/Users/matthewthompson/Documents/Academics/DS Masters Academics/Data Mining and Discovery/Assignments/final-project-thompson/data\"\n\n#list of dataset paths\nfolder_path = \"/Users/matthewthompson/Documents/Academics/DS Masters Academics/Data Mining and Discovery/Assignments/final-project-thompson/data\"\nevolution_path = os.path.join(folder_path, \"animals_rateof_evolution.csv\")\nfamily_path = os.path.join(folder_path, \"family-related_data.csv\")\n\n#loadsdatasets\nevolution_df = pd.read_csv(evolution_path)\nfamily_df = pd.read_csv(family_path)\n\n#dataset shapes\nevo_shape = evolution_df.shape\nfam_shape = family_df.shape\n\n#confirms loaded data\nprint(\"Evolution Data:\")\nprint(evolution_df.head())\n\nprint(\"\\nFamily Data:\")\nprint(family_df.head())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nEvolution Data:\n   Tree        Phylum         A         G         O        T         V  \\\n0     1    Tardigrada  0.000000  0.000000  0.000000  0.00000  0.000000   \n1     1   Onychophora  0.000000  0.000000  0.000000  0.00000  0.000000   \n2     1    Arthropoda  0.000228  0.000244  0.000376  0.00118  0.000935   \n3     1      Nematoda  0.000000  0.000000  0.000000  0.00000  0.000000   \n4     1  Nematomorpha  0.000000  0.000000  0.000000  0.00000  0.000000   \n\n          C         F         K         M         S  \n0  0.000000  0.000000  0.000000  0.000000  0.000000  \n1  0.000000  0.000000  0.000000  0.000000  0.000000  \n2  0.000995  0.001178  0.000043  0.000509  0.000108  \n3  0.000000  0.000000  0.000000  0.000000  0.000000  \n4  0.000000  0.000000  0.000000  0.000000  0.000000  \n\nFamily Data:\n                        Tree_Label     Phylum  SS  A  G  O  T  V  C  F  K  M  \\\n0                        1Laevipil   Mollusca   0  0  0  0  0  0  0  0  0  0   \n1                        Acanthoch   Mollusca   0  0  0  0  0  0  0  0  0  0   \n2   AF135482Carcharodon_carcharias  Chordata    0  0  0  0  0  0  0  0  0  0   \n3               AF369055Polypterus  Chordata    0  0  0  0  0  0  0  0  0  0   \n4  AF369057U15613_Polyodon_spathul  Chordata    0  0  0  0  0  0  0  0  0  0   \n\n   S  \n0  0  \n1  0  \n2  0  \n3  0  \n4  0  \n```\n:::\n:::\n\n\nFamily-related metadata: 1 indicates trait presence, a whereas 0 indicates trait absence. SS: Combined (any sexually selected trait), A: Auditory, G: Gustatory, O: Olfactory, T:Tactile, V: Visual, C: Male-male competition, F: Female choice, K: Female-female competition, M: Male choice, S: Intersexual conflict.\n\nRates of trait evolution metadata: A: Auditory, G: Gustatory, O:Olfactory, T:Tactile, V: Visual, C: Male-male competition, F: Female choice, K: Female-female competition, M: Male choice, S: Intersexual conflict.\n\n::: {#11000cb1 .cell execution_count=3}\n``` {.python .cell-code}\n#description of each dataset\nprint(\"1. Evolution Rate Dataset\")\nprint(f\"- File: animals_rateof_evolution.csv\")\nprint(f\"- Dimensions: {evo_shape[0]} rows × {evo_shape[1]} columns\")\nprint(\"- Description: Contains continuous values representing the evolutionary rate of various sexual traits across different animal taxa.\")\n\nprint(\"2. Family-Level Trait Dataset\")\nprint(f\"- File: family-related_data.csv\")\nprint(f\"- Dimensions: {fam_shape[0]} rows × {fam_shape[1]} columns\")\nprint(\"- Description: Encodes presence (1) or absence (0) of various sexually selected traits (e.g., visual, auditory, male-male competition) at the family level.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1. Evolution Rate Dataset\n- File: animals_rateof_evolution.csv\n- Dimensions: 84 rows × 12 columns\n- Description: Contains continuous values representing the evolutionary rate of various sexual traits across different animal taxa.\n2. Family-Level Trait Dataset\n- File: family-related_data.csv\n- Dimensions: 1087 rows × 13 columns\n- Description: Encodes presence (1) or absence (0) of various sexually selected traits (e.g., visual, auditory, male-male competition) at the family level.\n```\n:::\n:::\n\n\nI chose these two datasets, because the *family-related data* contains binary values (0 or 1) for various sexually selected traits, making it well-suited for training machine learning models across a diverse range of animal families. It could be great for hands-on experience with multi-class classification and feature selection. I may plan to use SHAP to help interpret the model's predictions and feature contributions primarily for both data depending on the model performance. The *evolutionary rates data* includes continuous values (some greater than 0 and some zeros), which allows for a comparative analysis to determine which approach—binary presence or continuous evolutionary rates—offers greater predictive power.\n\nSource: <https://frontiersin.figshare.com/articles/dataset/Data_Sheet_3_Evolution_of_sexually_selected_traits_across_animals_XLSX/21921510?file=38886321>\n\n(DataCite) Citation: Tuschhoff, E.; Wiens, John J. (2023). Data_Sheet_3_Evolution of sexually selected traits across animals.XLSX. Frontiers. Dataset. <https://doi.org/10.3389/fevo.2023.1042747.s003>\n\n## Questions\n\n-   How accurately can a machine learning model classify animal taxa based on the binary presence of sexually selected traits?\n-   Do evolutionary origin rates of sexual traits provide stronger predictive power than binary trait presence when classifying animal taxa?\n\n------------------------------------------------------------------------\n\n## Analysis plan\n\n### Overview\n\nThe primary objective is to assess and compare the predictive power and interpretability of both data.\n\n### Dataset Descriptions\n\n**1. Family-Level Trait Data (`family_df`)**\n\n-   Format: Binary indicators (`0` or `1`) for the presence or absence of sexually selected traits.\n\n-   Traits include: `SS`, `A`, `G`, `O`, `T`, `V`, `C`, `F`, `K`, `M`, `S`\n\n-   Each row represents a taxonomic family.\n\n-   The target variable will likely be a categorical label such as `Class` or a user-defined taxon.\n\n**2. Evolutionary Rates Data (`evolution_df`)**\n\n-   Format: Continuous numerical values representing the origin rates of the same traits listed above.\n\n-   Each row represents a taxonomic group.\n\n-   Target variable will match the one used in the binary dataset for comparison.\n\n### Exploratory Data Analysis (EDA)\n\nEDA will be performed separately for both datasets:\n\n-   Distribution plots for each trait.\n\n-   Correlation matrix or correlation heatmap\n\n-   Summary statistics for continuous traits.\n\n-   Count plots or bar charts showing trait prevalence by taxonomic group (e.g., class or family).\n\n### Modeling Approach\n\nFor both datasets:\n\n1\\. Data Preparation\n\n-   I will double check for any null values.\n\n-   I will encode target variable (animals taxa) using `LabelEncoder`. For the evolutionary rates, I will convert any values \\> 0 to 1 and hot-encode these numerical columns (sexually selected traits) for the presence of sexually selected traits.\n\n-   For `evolution_df`, I will standardize these sexually selected traits feature using `StandardScaler`.\n\n2\\. Models to Use\n\n-   `DecisionTreeClassifier`\n\n-   `RandomForestClassifier`\n\n-   `LogisticRegression`\n\n3\\. Evaluation Metrics\n\n-   Accuracy score\n\n-   Confusion matrix\n\n-   Classification report\n\n-   Cross-validation score (`cross_val_score`)\n\n-   ROC-AUC score\n\n4\\. Model Interpretation\n\n-   I will use SHAP to interpret trained models.\n\n-   I will generate SHAP summary plots and bar plots to highlight influential traits.\n\n-   I will compare interpretability between models trained on binary and continuous data for the evolutionary rates.\n\n### Comparison and Interpretation\n\n-   I will interpret the classification performance across both data and answer both questions. Then, I will draw conclusions about which dataset format (binary or continuous) provides stronger predictive insights for question #2.\n\n-   I will analyze SHAP outputs to identify which traits contribute most to predictions.\n\n-   I may also interpret which family has sexually selected traits and explain the results (if I have more time during the presentation).\n\n",
    "supporting": [
      "proposal_files/figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}